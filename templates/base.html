<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css" type="text/css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="{{url_for('static', filename='css/style.css')}}" type="text/css" />
</head>

<body>
    <header>
        <nav>
            <div class="nav-wrapper">
                <a href="{{url_for('get_recipes')}}" class="brand-logo">My Recipes</a>
                <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
                <ul class="right hide-on-med-and-down">
                    <li><a href="{{url_for('new_recipe')}}">New Recipe</a></li>
                    <li><a href="{{url_for('get_recipes')}}">Recipes</a></li>
                    <li><a href="{{url_for('get_ingredients')}}">Ingredients</a></li>
                </ul>
                <ul class="sidenav" id="mobile-demo">
                    <li><a href="{{url_for('new_recipe')}}">New Recipe</a></li>
                    <li><a href="{{url_for('get_recipes')}}">Recipes</a></li>
                    <li><a href="{{url_for('get_ingredients')}}">Ingredients</a></li>
                </ul>
            </div>
        </nav>
    </header>
    <div class="container">
        {% block content %} {% endblock %}
    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
        $(document).ready(function() {
            $('.collapsible').collapsible();
            $('input#input_text, textarea#textarea2').characterCounter();
            $('select').formSelect();
            $('.sidenav').sidenav();
            $('.modal').modal();
            $('.tooltipped').tooltip();
            //   $('select').material_select();
        });

        function refreshList() {
            request = $.ajax({
                url: "/modal_create_ingredient",
                type: "POST",
                data: $("#ingredient_field_modal"),

            });

            request.done(function(data) {
                $('.mysection').css("background-color", "#FFFF9C").effect("pulsate", { times: 6 }, 2000).animate({ backgroundColor: "#FFFFFF" }, 6500);
                $('.mysection').html(data)
                $('select').formSelect();
            });
        };

        function callModal() {
            $.ajax({
                url: "/get_ingredients",
                type: "GET",
                data: "ingredient_id",
            });
        }

        function goBack() {
            window.history.back();
        }

        function confirmModal() {
            $.ajax({
                url: "/get_this_recipe",
                type: "GET",
                data: $("#myDeleteModal")
            });
        }


        function deleteRecipe(recipe_id) {
            // var request;
            // if (recipe_id) {
                request = $.ajax({
                    url: "/delete_recipe" + "/" + recipe_id,
                    type: "GET",
                    data: $('#myDeleteModal').modal('close')
                });
                // recipe_id = "";
                request.done(
                    $.ajax({
                        url: "/get_recipes",
                        type: "GET",
                        data: "recipe_id"
                    })
                )
            // }
            // else {
            //     request = "";
            //     return;
            // }



        }

        function promptUser(recipe_id, recipe_name) {
            // var recipe_id = recipe_id;
            $('#myDeleteModal').modal('open');
            $("#delete_name").empty();
            $("#delete_name").append(recipe_name);

            // request = $.ajax({
            //     url: "/get_this_recipe",
            //     type: "GET",
            //     data: recipe_id
            // });

            $("#neilsBtn").click(function() {
                $(this).data('clicked', true);
                deleteRecipe(recipe_id);
            });


            // if ($("#neilsBtn").data('clicked')) {
            //     console.log("if state")
            //       $.ajax({
            //         url: "/delete_recipe",
            //         type: "GET",
            //         data: recipe_id
            //     });
            // } else {
            //     return;
            // }

            // $('#neilsBtn').click(function(recipe_id) {
            //     $.ajax({
            //         url: "/delete_recipe",
            //         type: "GET",
            //         data: "5d825d2323e869645445123c"
            //     });

            // })


            // var request  = $.ajax({
            //     url: "/get_this_recipe",
            //     type: "GET",
            //     data: recipe_id
            // });

            //   request.done(function(data){
            //       select("#delete_name").val(recipe_name);
            //   })

            // select("#delete_name").val(name);

            // if (confirm("Do you want to delete " + name + " ?")) {

            //     // $.ajax({
            //     //     url: "/get_this_recipe",
            //     //     type: "GET",
            //     //     data: $("#myDeleteModal")
            //     // });
            // }
            // else {

            //     return;

            // }

            //   $('#myDeleteModal').openModal()
        }
    </script>
</body>

</html>
